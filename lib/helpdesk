#-*-Perl-*-

$hof{"helpdesk"} = 0;

# Help Desk http://www.ubersoft.net/

sub helpdesk {
    my $time = shift;
    my @ltime = gmtime($time);
    my $date = strftime ("%Y%m%d",@ltime);
    # First comic 1996-Mar-31
    return undef if ($date < 19960331);

    #This array was produced using make_helpdesk_dates.
    #Last udpated: Wed Jul  4 11:15:35 2001
    my @dates = (
	20010611, 19960331, 19960408, 19960415, 19960422, 19960429, 19960506,
	19960513, 19960521, 19960527, 19960620, 19960627, 19960829, 19960912,
	19961107, 19961114, 19961121, 19961205, 19961212, 19961219, 19970109,
	19970116, 19970123, 19970130, 19970206, 19970213, 19970220, 19970227,
	19970306, 19970313, 19970320, 19970327, 19970410, 19970417, 19970522,
	19970529, 19970605, 19970612, 19970619, 19970626, 19970717, 19970724,
	19970809, 19970816, 19970821, 19970828, 19970904, 19970918, 19970911,
	19970918, 19971116, 19971123, 19971204, 19971211, 19971217, 19971224,
	19971229, 19980111, 19981201, 19981216, 19990116, 19990201, 19990216,
	19990316, 19990401, 19990501, 19990616, 19990702, 19990709, 19990715,
	19990721, 19990728, 19990802, 19990804, 19990806, 19990809, 19990811,
	19990813, 19990816, 19990821, 19990823, 19990825, 19990828, 19990901,
	19990903, 19990905, 19990908, 19990910, 19990912, 19990915, 19990917,
	19990920, 19990922, 19990924, 19990927, 19991101, 19991103, 19991105,
	19991108, 19991110, 19991112, 19991115, 19991117, 19991118, 19991119,
	19991120, 19991122, 19991125, 19991127, 19991129, 19991201, 19991203,
	19991206, 19991208, 19991210, 19991213, 19991215, 19991217, 19991220,
	19991222, 19991224, 19991227, 19991229, 19991231, 20000101, 20000103,
	20000105, 20000107, 20000110, 20000112, 20000114, 20000117, 20000119,
	20000121, 20000124, 20000126, 20000128, 20000131, 20000202, 20000204,
	20000207, 20000209, 20000211, 20000214, 20000223, 20000225, 20000301,
	20000306, 20000308, 20000313, 20000315, 20000317, 20000320, 20000322,
	20000324, 20000327, 20000328, 20000329, 20000330, 20000331, 20000401,
	20000405, 20000407, 20000409, 20000412, 20000414, 20000417, 20000419,
	20000421, 20000424, 20000426, 20000428, 20000501, 20000503, 20000505,
	20000508, 20000510, 20000512, 20000515, 20000516, 20000517, 20000518,
	20000519, 20000522, 20000524, 20000526, 20000529, 20000530, 20000531,
	20000601, 20000602, 20000605, 20000606, 20000607, 20000608, 20000609,
	20000612, 20000613, 20000614, 20000615, 20000616, 20000619, 20000620,
	20000621, 20000622, 20000623, 20000626, 20000627, 20000628, 20000629,
	20000630, 20000703, 20000705, 20000706, 20000710, 20000712, 20000713,
	20000714, 20000717, 20000718, 20000720, 20000724, 20000727, 20000728,
	20000731, 20000801, 20000802, 20000803, 20000804, 20000807, 20000808,
	20000810, 20000811, 20000814, 20000815, 20000816, 20000821, 20000822,
	20000823, 20000824, 20000825, 20000828, 20000829, 20000830, 20000831,
	20000901, 20000904, 20000906, 20000907, 20000908, 20000911, 20000912,
	20000913, 20000914, 20000915, 20000919, 20000920, 20000921, 20000922,
	20000925, 20000926, 20000927, 20000929, 20001002, 20001003, 20001004,
	20001009, 20001010, 20001011, 20001012, 20001016, 20001017, 20001018,
	20001019, 20001020, 20001023, 20001024, 20001025, 20001026, 20001027,
	20001031, 20001102, 20001103, 20001106, 20001107, 20001108, 20001109,
	20001110, 20001113, 20001114, 20001115, 20001120, 20001121, 20001122,
	20001123, 20001124, 20001128, 20001129, 20001130, 20001201, 20001204,
	20001205, 20001206, 20001207, 20001208, 20001211, 20001213, 20001214,
	20001215, 20001218, 20001219, 20001221, 20001222, 20001225, 20001226,
	20001227, 20001228, 20001229, 20010103, 20010104, 20010105, 20010108,
	20010109, 20010110, 20010111, 20010112, 20010115, 20010116, 20010117,
	20010118, 20010119, 20010122, 20010123, 20010124, 20010125, 20010126,
	20010129, 20010130, 20010131, 20010201, 20010202, 20010205, 20010206,
	20010207, 20010208, 20010209, 20010212, 20010213, 20010214, 20010215,
	20010216, 20010219, 20010221, 20010222, 20010223, 20010226, 20010227,
	20010228, 20010301, 20010302, 20010305, 20010306, 20010307, 20010308,
	20010309, 20010311, 20010314, 20010316, 20010319, 20010320, 20010321,
	20010322, 20010323, 20010326, 20010330, 20010402, 20010403, 20010405,
	20010406, 20010409, 20010410, 20010411, 20010412, 20010413, 20010416,
	20010417, 20010418, 20010423, 20010424, 20010425, 20010426, 20010427,
	20010430, 20010501, 20010502, 20010503, 20010504, 20010507, 20010508,
	20010509, 20010510, 20010511, 20010514, 20010515, 20010516, 20010517,
	20010518, 20010521, 20010523, 20010524, 20010525, 20010529, 20010530,
	20010531, 20010601, 20010604, 20010605, 20010606, 20010607, 20010608,
	20010612, 20010613, 20010625, 20010626, 20010628, 20010629, 20010702,
	20010703);

    #determine if today is newer than the date list. This depends on the
    #last entry in the date array to be the latest date in the whole array.
    if ($date < $dates[$#dates]) {
	return undef unless grep(/$date/,@dates);
    }

    my $baseurl = "http://www.ubersoft.net";
    my $rec = {
	'title' => "Help Desk",
	'author' => "Cristopher B. Wright",
	'type' => "png",
	'main' => "$baseurl/",
	'archives' => "$baseurl/d/archives.html",
	'base' => $baseurl,
	'page' => "/d/$date.html",
	'func' => sub {
	    #split so that the contents of each embedded image tag in the
	    #html is put into its own item in the @text array
	    my @text = split(/<IMG/i,shift);
	    #grep for only those img srcs that make up the comic strip,
	    #treating each item in the array as a single line (even though
	    #they may have newlines in them) and return only the relurls
	    #for each image.
	    my @relurls = 
		grep(s/.*src=".*?(\/comics\/hd$date\w?\.png)".*/$1/si,@text);
	    return @relurls;
	},
    };

    return $rec;
}

1;
