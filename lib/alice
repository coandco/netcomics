#-*-Perl-*-

#Tack on the names of the subroutines to the list of functions
$hof{"alice"} = 14;
$hof{"adventure"} = 7;

sub alicecomics {
    my ($time,$title,$ext,$size,$main,$dir,$expr) = @_;
    my @ltime = gmtime($time);
    my $base = "http://www.alicecomics.com";

    my $rec = {
	'title' => $title,
	'author' => "Michael McKay-Fleming",
	'type' => $ext,
	'main' => "$base/$main",
	'archives' => "$base/$main",
	'base' => "$base/",
	'size' => $size,
	'page' => strftime("$dir/%Y%m%d.html",@ltime),
	'expr' => strftime("($expr%Y%m%d\\w*\\.\\w+)\"", @ltime),
	};
    return $rec;
}

sub alice  {
    my $time = shift;
    my @ltime = gmtime($time);
    return undef if (($ltime[6] == 0) && ($time < mkgmtime(0,0,0,19,2,100)));
    my $ext = ($ltime[6]==0) ? "jpg" : "gif";
    $ext = "jpg" if (strftime("%Y%m%d", @ltime) =~ 
		     /^(1999(062(5|8)|07(0(1|6|9)|1(6|7|9)|20)
			     |0811|11(15|25)|1224)
			|200001(04|26))$/);
    my $size = ($ltime[6]==0) ? [650,270] : [640,477];
    return alicecomics($time,"Alice",$ext,"today.html",$size,"d",
		       "comics/alice");
}

# Adventure Inc
# ex : http://www.alicecomics.com/advcomics/adv20000721d.jpg
sub adventure {
    my $time = shift;
    return undef if $time < mkgmtime(0,0,0,2,6,100); #1st comic: 07/02/2000
    return alicecomics($time,"Adventure",'jpg',"adventure.html",[500,710],
		       "advd","advcomics/adv");
}

1;
